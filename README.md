# Ultima-like RPG

## ゲーム概要

小さな島に漂着した冒険者（🧝）となって、生存を図りながら島の謎を解く探索型RPGです。
フィールドを探索し、敵と戦い、商人から物資を補給しながら、最終的に洞窟で **Ancient Key** を入手し、遺跡の門を開いて中枢に到達することが目標です。

### 世界

ゲームは3つのシーンで構成されています：

- **FIELD（フィールド）** - 島全体。探索、戦闘、各施設への入口がある
- **VILLAGE（村）** - 安全地帯。商人🧙‍♂️がいて、物資の売買ができる
- **CAVE（洞窟）** - ミニ区画。宝箱に重要なアイテムがある

### リソース管理

生存のために以下のリソースを管理する必要があります：

- **HP（体力）** - 0になるとゲームオーバー
- **Food（食料）** - フィールドや洞窟で2歩ごとに1消費。0になると歩くたびにHPが減少
- **Gold（所持金）** - 商人から物資を購入するために必要
- **装備** - 武器（ATK上昇）と盾（DEF上昇）を装備可能

## 操作方法

### 基本移動
- **矢印キー（↑↓←→）** - 4方向に移動

### フィールドでの操作
- **T** - Talk（会話） - 商人に隣接して話しかける
- **I** - Items（アイテム） - インベントリを開く
- **U** - Use（使用） - 選択中のアイテム（ポーション等）を使用
- **S** - Stats（ステータス） - ステータス画面を表示

### ショップでの操作
- **B** - Buy（購入） - 選択中のアイテムを購入
- **S + Enter** - Sell（売却） - 選択中のアイテムを売却
- **E** - Equip（装備） - 武器・盾の装備/解除を切り替え

### 戦闘（未実装）
- **A** - Attack（攻撃）
- **D** - Defend（防御）
- **R** - Run（逃げる）

### 共通操作
- **Enter** - 決定
- **Esc** - キャンセル/メニューを閉じる

## ゲームの進め方

1. フィールドを探索し、敵を倒して経験値と金を獲得
2. 村（🏘️）に入り、商人から食料やポーション、装備を購入
3. 食料を管理しながら洞窟（🕳️）を探索
4. 洞窟の宝箱（📦）から **Ancient Key** を入手
5. 鍵を持って遺跡（🏛️）に到達するとクリア

## 開発状況

### 実装済み
- ✅ 3シーン（FIELD/VILLAGE/CAVE）のマップとワープ機能
- ✅ プレイヤー中心カメラ
- ✅ 食料（Food）管理システム
- ✅ 商人とのショップシステム（売買）
- ✅ インベントリと装備システム
- ✅ ポーション使用機能
- ✅ ステータス表示

### 未実装
- ⬜ 戦闘システム
- ⬜ 敵キャラクターの配置
- ⬜ レベルアップとステータス成長
- ⬜ 鍵の入手イベント
- ⬜ 遺跡クリア判定
- ⬜ BGM/効果音

## 技術仕様

- **フレームワーク**: p5.js
- **画面サイズ**: 800x600
- **タイルサイズ**: 40px（設計値は32px）
- **マップサイズ**: 24x18タイル

## ファイル構成

- `sketch.js` - メインループとゲーム初期化
- `game_state.js` - ゲーム状態管理
- `map_data.js` - マップデータ定義
- `render.js` - 描画処理
- `input.js` - 入力処理
- `shop.js` - ショップシステム
- `combat.js` - 戦闘システム（スタブ）

詳細な設計は `GAME_DESIGN.md` を、進捗状況は `Progress.md` を参照してください。