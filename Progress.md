# Progress

## 概要
- FIELD / VILLAGE / CAVE の3シーン構成とワープ、プレイヤー中心カメラ、Foodによる空腹管理まで基本探索ループを実装。
- ショップとインベントリは Phase1 仕様を満たし、Buy/Sell・装備トグル・ポーション使用をサポート。
- Phase2 で敵シンボル常駐とターン制戦闘 (A/D/R) を導入。EXP/Gold 報酬とレベルアップも機能。
- Ancient Key 入手や遺跡クリアなどストーリー進行要素は未実装で、今後の拡張が必要。

## 比較リスト
| 項目 | 期待仕様 (GAME_DESIGN.md) | 現状実装 | コメント |
| --- | --- | --- | --- |
| シーン構成 | FIELD / VILLAGE / CAVE (24x18) と入口タイル経由の遷移 | `map_data.js` に3シーン分のマップとスポーン/ワープ設定を実装済み | 遺跡・洞窟宝箱などのイベント処理は未実装 |
| タイル / 描画 | タイル32px・800x360表示・ランドマーク表示 | タイル40px＋プレイヤー中心カメラで描画し、主要タイルに絵文字アイコンを配置 | タイルサイズが設計値と異なり、今後調整の余地あり |
| プレイヤー移動 | 矢印キー移動、通行判定、入口接触で遷移 | `input.js` で4方向移動・通行不可判定・入口イベントを処理 | 鍵チェックや特殊タイルイベントは未搭載 |
| リソース / 空腹 | HP/ATK/DEF/LV/EXP、Food2歩=1消費、Food0でHP減少 | 初期パラメータとFood消費を実装し、Food補充はショップ購入で対応 | EXP閾値・レベルアップ処理を実装済みだが、ストーリー進行報酬は未設定 |
| メッセージ / UI | 上段マップ＋中段メッセージ/ステータス＋下段コマンド | 3パネル＋メッセージ3件表示に加え、ショップ／インベントリ／ステータス／戦闘オーバーレイを描画 | メッセージログ拡張や詳細ステータス表示は今後の課題 |
| 操作キー | T:会話、I/U/S:メニュー、A/D/R:戦闘、Enter/Esc:操作 | 戦闘キー A/D/R が有効化され、T/I/S/Esc も現行UIを制御 | Enter は一部UIのみ対応、今後のメッセージ送り改善余地あり |
| 商人 / ショップ | Buy/Sell、価格提示、在庫チェック | `shop.js` で Buy/Sell ロジックを実装。Bで即購入、S+Enterで売却。Gold/枠/装備状態を検証 | 会話テキストや在庫変動・価格変動などは未実装 |
| インベントリ / アイテム | 6枠、Potion/Weapon/Shield/Key、装備でATK/DEF上昇 | インベントリ管理・装備トグル・ポーション使用を実装。Ancient Key は未使用 | カテゴリ表示や並び替え、戦利品ドロップは未対応 |
| 経済 / アイテム価格 | Food/Potion/装備の買値、売値=50%、Foodは数値リソース | PRICEテーブルと売値50%を実装し、Food×10は直接Food数値を加算 | 新商品の追加や在庫制限など経済バランス調整は未対応 |
| 敵シンボル / 戦闘 | フィールドに敵シンボル、接触でターン制戦闘（A/D/R、勝敗処理） | FIELDに3〜5体スポーンし、接触で戦闘開始。攻撃/防御/逃走・勝利報酬・LVアップ・敗北復帰を実装 | バイオームごとの出現調整は簡易版。特殊行動やドロップは未実装 |
| 進行イベント | 洞窟宝箱で鍵入手→遺跡でクリア | `state.flags.hasKey` 等のフラグはあるが取得・判定ロジックは未実装 | クリア条件、演出、鍵入手イベントは今後実装が必要 |
