# Progress

## 概要
- FIELD / VILLAGE / CAVE の3シーンとワープ構造、プレイヤー中心カメラ、空腹（Food）管理まで探索の基本ループを実装済み。
- ショップとインベントリが Phase1 仕様に沿って動作し、Buy/Sell・装備トグル・ポーション使用などが可能になった。
- 戦闘、鍵イベント、遺跡クリア、敵シンボルなど進行の核要素はまだ未着手で、デザインドキュメントとの差分が残っている。

## 比較リスト
| 項目 | 期待仕様 (GAME_DESIGN.md) | 現状実装 | コメント |
| --- | --- | --- | --- |
| シーン構成 | FIELD / VILLAGE / CAVE を24x18タイルで用意し、入口タイルでシーン遷移 | `map_data.js` に3シーン分のマップと入口リンクを実装。スポーン地点・往復ワープも機能 | 遺跡・洞窟宝箱などのシナリオイベントは未実装 |
| タイル / 描画 | タイル32px・800x360表示・ランドマークアイコン | タイル40px＋プレイヤー中心カメラで描画。ランドマーク用絵文字は主要タイルに割当済み | タイルサイズが設計値と異なる、今後調整の余地あり |
| プレイヤー移動 | 矢印キー移動、通行判定、入口接触でシーン遷移 | `input.js` で移動・通行不可判定・入口イベント処理まで対応 | 鍵チェックや特殊タイルイベントは未導入 |
| リソース / 空腹 | HP/ATK/DEF/LV/EXP、Food2歩=1消費、Food0でHP減少 | 初期パラメータとFood消費ロジックを実装、Food補充はアイテム購入で対応 | LV/EXP上昇やステータス成長は未実装 |
| メッセージ / UI | マップ上段＋メッセージ/ステータス/コマンド下段、各種オーバーレイ | 3パネル描画＋メッセージ3件表示、ショップ／インベントリ／ステータスのテキストUIオーバーレイを追加 | パネル文言は暫定、将来的な詳細表示やログ拡張は未着手 |
| 操作キー | T:会話、I/U/S:メニュー、A/D/R:戦闘、Enter/Esc:決定/キャンセル | Tで商人との交渉開始、I/U/S/Escで各オーバーレイ操作、矢印でリスト移動 | 戦闘キーA/D/Rは未実装。Enterは一部UIのみ使用 |
| 商人 / ショップ | Buy/Sell、価格提示、在庫処理、条件チェック | `shop.js` でBuy/Sellロジック実装。Bで即購入、S＋Enterで売却。Gold/枠/装備チェックを実施 | 会話テキストや在庫変動、価格変動などは未実装 |
| インベントリ / アイテム | 6枠、Potion/Weapon/Shield/Key、装備でATK/DEF上昇 | `game_state.js` でインベントリ管理・装備状態・ポーション使用と装備トグルを実装。ANCIENT_KEYは未使用 | カテゴリ別表示やドロップ/並び替えは未対応 |
| 経済 / アイテム価格 | Food/Potion/装備の買値、売値=50%、Foodは数値リソース | PRICEテーブルと売値50%を実装。Food×10は倉庫を使わず加算 | 今後の新商品や在庫制限には未対応 |
| 戦闘 | シンボル接触でターン制バトル、A/D/R操作、勝敗処理 | `combat.js` はスタブのみ。敵シンボル未配置のため戦闘開始不可 | デザイン上の行動/報酬/敗北処理はすべて未実装 |
| 進行イベント | 洞窟宝箱で鍵入手→遺跡でクリア、シナリオメッセージ | `state.flags.hasKey` などのフラグはあるが取得/判定ロジックなし | クリア条件と関連イベントは今後の開発項目 |
